<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ABDI KIMUTAI BETT | AI Photo Editor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- APP ICON -->
<link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,Arial;
  background:#0c0c0c;
  color:#fff;
}

/* SPLASH */
#splash{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  font-weight:bold;
  z-index:9999;
}

/* HEADER */
header{
  text-align:center;
  padding:12px;
  background:#000;
}
.logo{color:#00ffd5;font-size:22px}

/* MAIN */
main{padding:10px}
canvas{
  width:100%;
  background:#222;
  border-radius:12px;
  touch-action:none;
}

/* CONTROLS */
.controls{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:8px;
  margin-top:10px;
}
button,select,input[type=range]{
  padding:10px;
  border:none;
  border-radius:8px;
}
button{
  background:#00ffd5;
  font-weight:bold;
}
.slider{grid-column:span 2}

footer{
  text-align:center;
  font-size:12px;
  color:#aaa;
  padding:8px;
}
</style>
</head>

<body>

<div id="splash">ðŸ“¸ ABDI KIMUTAI BETT</div>

<header>
  <div class="logo">ABDI KIMUTAI BETT</div>
  <div>AI Photo Editor</div>
</header>

<main>

<input type="file" id="upload" accept="image/*">

<canvas id="canvas"></canvas>

<div class="controls">

<div class="slider">Brightness
<input type="range" id="brightness" min="0" max="200" value="100">
</div>

<div class="slider">Contrast
<input type="range" id="contrast" min="0" max="200" value="100">
</div>

<select id="fontSelect">
  <option>Arial</option>
  <option>Georgia</option>
  <option>Courier New</option>
  <option>Impact</option>
</select>

<button onclick="addText()">Add Text</button>
<button onclick="drawMode()">Draw</button>

<button onclick="addSticker()">Sticker</button>
<button onclick="rotate()">Rotate</button>

<button onclick="preset('vintage')">Vintage</button>
<button onclick="preset('cool')">Cool</button>

<button onclick="removeBG()">AI Remove BG</button>
<button onclick="reset()">Reset</button>

<button onclick="download()" style="grid-column:span 2">Download</button>

</div>

</main>

<footer>Â© 2025 ABDI KIMUTAI BETT</footer>

<script>
setTimeout(()=>splash.style.display="none",1500);

const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
let img=new Image();
let original=null;
let drawing=false;

/* IMAGE UPLOAD */
upload.onchange=e=>{
  let r=new FileReader();
  r.onload=()=>img.src=r.result;
  r.readAsDataURL(e.target.files[0]);
};

img.onload=()=>{
  canvas.width=img.width;
  canvas.height=img.height;
  ctx.drawImage(img,0,0);
  original=ctx.getImageData(0,0,canvas.width,canvas.height);
};

/* BRIGHTNESS & CONTRAST */
brightness.oninput=contrast.oninput=()=>{
  if(!original)return;
  let d=new ImageData(new Uint8ClampedArray(original.data),original.width,original.height);
  let b=brightness.value/100,c=contrast.value/100;
  for(let i=0;i<d.data.length;i+=4){
    d.data[i]*=b*c;
    d.data[i+1]*=b*c;
    d.data[i+2]*=b*c;
  }
  ctx.putImageData(d,0,0);
};

/* FILTERS */
function preset(type){
  let d=ctx.getImageData(0,0,canvas.width,canvas.height);
  for(let i=0;i<d.data.length;i+=4){
    let r=d.data[i],g=d.data[i+1],b=d.data[i+2];
    if(type==="vintage"){d.data[i]=r*1.1;d.data[i+2]=b*0.8}
    if(type==="cool"){d.data[i+2]+=25}
  }
  ctx.putImageData(d,0,0);
}

/* TEXT */
function addText(){
  let t=prompt("Enter text");
  if(!t)return;
  ctx.font=`40px ${fontSelect.value}`;
  ctx.fillStyle="white";
  ctx.fillText(t,50,80);
}

/* STICKERS (PNG/EMOJI) */
function addSticker(){
  ctx.font="60px Arial";
  ctx.fillText("ðŸ”¥",120,150);
}

/* DRAW TOOL */
function drawMode(){
  canvas.onpointerdown=e=>{drawing=true;ctx.beginPath();ctx.moveTo(e.offsetX,e.offsetY)};
  canvas.onpointermove=e=>{
    if(!drawing)return;
    ctx.lineWidth=5;
    ctx.strokeStyle="red";
    ctx.lineTo(e.offsetX,e.offsetY);
    ctx.stroke();
  };
  canvas.onpointerup=()=>drawing=false;
}

/* ROTATE */
function rotate(){
  let t=document.createElement("canvas"),x=t.getContext("2d");
  t.width=canvas.height;
  t.height=canvas.width;
  x.translate(t.width/2,t.height/2);
  x.rotate(Math.PI/2);
  x.drawImage(canvas,-canvas.width/2,-canvas.height/2);
  canvas.width=t.width;
  canvas.height=t.height;
  ctx.drawImage(t,0,0);
  original=ctx.getImageData(0,0,canvas.width,canvas.height);
}

/* AI BACKGROUND REMOVER */
async function removeBG(){
  const API_KEY="PASTE_YOUR_REMOVEBG_API_KEY_HERE";

  let blob=await new Promise(res=>canvas.toBlob(res));
  let form=new FormData();
  form.append("image_file",blob);

  let r=await fetch("https://api.remove.bg/v1.0/removebg",{
    method:"POST",
    headers:{ "X-Api-Key":API_KEY },
    body:form
  });

  let b=await r.blob();
  let u=URL.createObjectURL(b);
  let i=new Image();
  i.onload=()=>{
    canvas.width=i.width;
    canvas.height=i.height;
    ctx.drawImage(i,0,0);
    original=ctx.getImageData(0,0,canvas.width,canvas.height);
  };
  i.src=u;
}

/* RESET */
function reset(){
  if(original)ctx.putImageData(original,0,0);
  brightness.value=100;
  contrast.value=100;
}

/* DOWNLOAD */
function download(){
  let a=document.createElement("a");
  a.download="ABDI_KIMUTAI_BETT_EDIT.png";
  a.href=canvas.toDataURL();
  a.click();
}
</script>

</body>
</html>
